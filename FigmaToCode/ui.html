<!-- <h2>Rectangle Creator</h2>
<p>Count: <input id="count" value="5"></p>
<button id="create">Create</button>
<button id="cancel">Cancel</button> -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="div-container"></div>
</body>

</html>
<script>
  let components = [];
  onmessage = ({ data }) => {
    components = data.pluginMessage.components
    createDiv(components);
  };


</script>

<script>
  function createDiv(components) {
    let htmlCode = "<!DOCTYPE html><html><body>";
    components.forEach(element => {
      htmlCode = htmlCode + getHtmlCodeDiv(element);
    });
    htmlCode = htmlCode + "</body></html>";
    document.getElementById('div-container').innerText = htmlCode;
  }
</script>

<script>
  function getHtmlCodeDiv(element) {
    const divHtml = `
    <div 
        style='
        background-color:rgb(${element.color.r},${element.color.g},${element.color.b});
        width:${element.width}; 
        height:${element.height};
        position:${element.position};
        top:${element.pos_y};
        left:${element.pos_x}
        '>
    </div>
    `;
    return divHtml;
  }

</script>